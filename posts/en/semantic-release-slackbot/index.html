
<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        
            <title>Automate release notifications with semantic-release-slack-bot</title>
            <meta name="description" content="Sometimes, even a description is too much">
        

        
        
        
        <link rel="apple-touch-icon" sizes="180x180" href="/personal-site/static/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/personal-site/static/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/personal-site/static/favicon-16x16.png">

        
            
            <link rel="preload" href="/personal-site/assets/css/index.sqTM6_uEYBVKSi56QVhsh.min.css" as="style" />
            <link rel="stylesheet" href="/personal-site/assets/css/index.sqTM6_uEYBVKSi56QVhsh.min.css" type="text/css" />
        

        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Playfair+Display:ital,wght@0,700;1,400&display=swap" rel="stylesheet">

        <link rel="alternate" href="/personal-site/feed/en.feed.xml" type="application/atom+xml" title="DeveloperLoper">
        <link rel="alternate" href="/personal-site/feed/en.feed.json" type="application/json" title="DeveloperLoper">
    </head>
    <body class="s-common s-light-theme default-layout">
        <header class="c-header">
    <a href="/personal-site/">
        <span class="c-logo">DeveloperLoper</span>
    </a>
    <nav role="navigation" class="c-nav">
        
        

        <ul class="c-nav-list"><li class="c-nav-list_item">
            
                <a class="c-simple-link" href="/personal-site/">Home</a>
            </li><li class="c-nav-list_item">
            
                <a class="c-simple-link" href="/personal-site/posts/">Posts</a>
            </li><li class="c-nav-list_item">
            
                <a class="c-simple-link" href="/personal-site/about/">About</a>
            </li></ul>
    </nav>
</header>


        <main class="tmpl-post">
            
<div class="p-article">
    <div class="p-article_hero">
        
        <time class="p-article_date" datetime="2022-08-29">
            29 Aug 2022
        </time>
        <h1 class="p-article_title">Automate release notifications with semantic-release-slack-bot</h1>
        <div class="p-artilce_tags"><a href="/personal-site/tags/libraries/" class="c-underline-link">libraries</a>&nbsp<a href="/personal-site/tags/semantic-release/" class="c-underline-link">semantic-release</a>&nbsp
        </div>
    </div>

    <div role="main" class="c-content">
        <p><a href="https://github.com/semantic-release/semantic-release">Semantic release</a> is an well-documented, easy to use, library for automated version management and package publishing. It automates the whole package release workflow including: determining the next version number, generating the release notes, and publishing the package.</p>
<p>Each release step is implemented by configurable <a href="https://github.com/semantic-release/semantic-release/blob/master/docs/usage/plugins.md">plugins</a>. This allows for support of different commit message formats, release note generators and publishing platforms.</p>
<hr>
<p>Of particular interest is the <a href="https://github.com/juliuscc/semantic-release-slack-bot">semantic-release-slack-bot</a> plugin, which automates posting release notifications to a slack channel from a slack bot.</p>
<p>Setting this up is super easy, but comes with some gotchas.</p>
<h2 id="add-the-plugin-to-your-project" tabindex="-1">Add the plugin to your project <a class="direct-link" href="#add-the-plugin-to-your-project"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>


</a></h2>
<pre><code>$ yarn add -D semantic-release-slack-bot
</code></pre>
<h2 id="configure-the-plugin-in-your-semantic-release-configuration-file" tabindex="-1">Configure the plugin in your semantic-release configuration file <a class="direct-link" href="#configure-the-plugin-in-your-semantic-release-configuration-file"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>


</a></h2>
<p>If you’ve just been using your <code>package.json</code> file to configure semantic release, you’ll want to create a <code>.releaserc</code> <a href="https://github.com/semantic-release/semantic-release/blob/master/docs/usage/configuration.md#configuration">configuration file</a> at this point.</p>
<p>This file can be written in YAML or JSON, with optional extensions: <code>.yaml</code>, <code>.yml</code>, <code>.json</code>, <code>.js</code>.</p>
<p>I prefer <code>.js</code> to resemble to <code>.json</code> format most semantic-release documentation uses while allow comments.</p>
<h3 id="re-configure-the-default-semantic-release-steps" tabindex="-1">Re-configure the default semantic-release steps <a class="direct-link" href="#re-configure-the-default-semantic-release-steps"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>


</a></h3>
<p>Skip this step if you already have a semantic release configuration file set up.</p>
<pre class="language-js"><code class="language-js"><span class="token comment">// .releaserc.js</span><br>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span><br>    <span class="token literal-property property">branches</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// your release branch configuration</span><br>    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>        <span class="token comment">/**<br>         * These four plugins are already part of semantic-release and are listed in order of execution. They do not have to be installed separately:<br>         *<br>         * @see: https://semantic-release.gitbook.io/semantic-release/usage/plugins#default-plugins<br>         */</span><br>        <span class="token string">'@semantic-release/commit-analyzer'</span><span class="token punctuation">,</span><br>        <span class="token string">'@semantic-release/release-notes-generator'</span><span class="token punctuation">,</span><br>        <span class="token string">'@semantic-release/npm'</span><span class="token punctuation">,</span><br>        <span class="token string">'@semantic-release/github'</span><span class="token punctuation">,</span><br>    <span class="token punctuation">]</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span></code></pre>
<h3 id="configure-the-semantic-release-slack-bot-plugin" tabindex="-1">Configure the semantic-release-slack-bot plugin <a class="direct-link" href="#configure-the-semantic-release-slack-bot-plugin"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>


</a></h3>
<p>I only wanted notifications for successful relases on my <code>main</code> branch.</p>
<p>View all the plugin’s <a href="https://github.com/juliuscc/semantic-release-slack-bot#options">options</a> to fine-tune your configuration.</p>
<pre class="language-js"><code class="language-js"><span class="token comment">// .releaserc.js</span><br>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span><br>    <span class="token operator">...</span><br>    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>        <span class="token operator">...</span> <span class="token comment">// default plugins</span><br>        <span class="token comment">/**<br>         * Plugin to get release notifications on slack from a slack bot<br>         *<br>         * @see: https://github.com/juliuscc/semantic-release-slack-bot<br>         */</span><br>        <span class="token punctuation">[</span><br>        <span class="token string">'semantic-release-slack-bot'</span><span class="token punctuation">,</span><br>        <span class="token punctuation">{</span><br>            <span class="token literal-property property">branchesConfig</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>            <span class="token punctuation">{</span><br>                <span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token string">'main'</span><span class="token punctuation">,</span><br>                <span class="token literal-property property">notifyOnSuccess</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>                <span class="token literal-property property">notifyOnFail</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br>            <span class="token punctuation">}</span><span class="token punctuation">,</span><br>            <span class="token punctuation">]</span><span class="token punctuation">,</span><br>        <span class="token punctuation">}</span><span class="token punctuation">,</span><br>        <span class="token punctuation">]</span><span class="token punctuation">,</span><br>    <span class="token punctuation">]</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span></code></pre>
<h3 id="add-the-semantic-release-slack-app-to-your-slack-workspace." tabindex="-1">Add the semantic-release slack app to your slack workspace. <a class="direct-link" href="#add-the-semantic-release-slack-app-to-your-slack-workspace."><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>


</a></h3>
<p>Follow <a href="https://slack.com/oauth/authorize?client_id=605439709265.611687593109&amp;scope=incoming-webhook">this link</a>. This may require approval by your workspace admin.</p>
<p>Once the app is installed in your workspace, you’ll have to add it to the channel you’d like to post to.</p>
<h3 id="configure-the-slack-webhook-url" tabindex="-1">Configure the slack webhook url <a class="direct-link" href="#configure-the-slack-webhook-url"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>


</a></h3>
<p>Once you’ve added the semantic-release slack app to a channel, you should be taken to a page with a webhook to post to this channel. Copy this url and add it to the <code>slackWebhook</code> option in your configuration file.</p>
<pre class="language-js"><code class="language-js"><span class="token comment">// .releaserc.js</span><br>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span><br>    <span class="token operator">...</span><br>    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>        <span class="token punctuation">[</span><br>        <span class="token string">'semantic-release-slack-bot'</span><span class="token punctuation">,</span><br>        <span class="token punctuation">{</span><br>            <span class="token comment">/**<br>             * url to post to #my-channel<br>             **/</span><br>            <span class="token literal-property property">slackWebhook</span><span class="token operator">:</span> <span class="token string">"https://my-webhook.com"</span><span class="token punctuation">,</span> <span class="token comment">// replace with the copied url</span><br>            <span class="token literal-property property">branchesConfig</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>        <span class="token punctuation">}</span><span class="token punctuation">,</span><br>        <span class="token punctuation">]</span><span class="token punctuation">,</span><br>    <span class="token punctuation">]</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span></code></pre>
<h3 id="configure-the-release-notes-format" tabindex="-1">Configure the release notes format <a class="direct-link" href="#configure-the-release-notes-format"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>


</a></h3>
<p>By default, <a href="https://github.com/juliuscc/semantic-release-slack-bot/issues/44">semantic-release-slack-bot does not format the default slack message with slack-friendly markdown</a>.</p>
<p>To properly format the release notification, we’ll need to set <code>markdownReleaseNotes</code> to <code>true</code>.</p>
<pre class="language-js"><code class="language-js"><span class="token comment">// .releaserc.js</span><br>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span><br>    <span class="token operator">...</span><br>    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>        <span class="token punctuation">[</span><br>        <span class="token string">'semantic-release-slack-bot'</span><span class="token punctuation">,</span><br>        <span class="token punctuation">{</span><br>            <span class="token literal-property property">markdownReleaseNotes</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>            <span class="token operator">...</span><br>        <span class="token punctuation">}</span><span class="token punctuation">,</span><br>        <span class="token punctuation">]</span><span class="token punctuation">,</span><br>    <span class="token punctuation">]</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span></code></pre>
<h2 id="conclusion" tabindex="-1">Conclusion <a class="direct-link" href="#conclusion"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>


</a></h2>
<p>We did it 🎉</p>
<p>New releases should now trigger a post to your slack channel containing the current version and release notes.</p>
<br/>
    <img src="/static/images/semantic-release-slackbot/screenshot-success.png" alt="a screenshot of an example semantic release slack message" />
<br/>

        <br/>
        <a href="https://twitter.com/developerLoper">@GLo</a>
    </div>
    <div class="c-pagination">
        <ul class="c-pagination_list">
            <li>Previous: <a class="c-pagination_link c-underline-link" href="/personal-site/posts/en/doing-over-dreaming/">Doing over dreaming</a></li>
        
        </ul>
    </div>
</div>



        </main>

        <script type="module" src="/personal-site/assets/js/bundle.js"></script>
    </body>
</html>
